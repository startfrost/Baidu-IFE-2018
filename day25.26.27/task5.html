<!DOCTYPE html>
<html>

<body>
    <select id="year-select">
        <option value="2000">2000</option>
        <option value="2001">2001</option>
        <option value="2002">2002</option>
        <option value="2003">2003</option>
        <option value="2004">2004</option>
        <option value="2005">2005</option>
        <option value="2006">2006</option>
        <option value="2007">2007</option>
        <option value="2008">2008</option>
        <option value="2009">2009</option>
        <option value="2010">2010</option>
        <option value="2011">2011</option>
        <option value="2012">2012</option>
        <option value="2013">2013</option>
        <option value="2014">2014</option>
        <option value="2015">2015</option>
        <option value="2016">2016</option>
        <option value="2017">2017</option>
        <option value="2018">2018</option>
        <option value="2019">2019</option>
        <option value="2020">2020</option>
        <option value="2021">2021</option>
        <option value="2022">2022</option>
        <option value="2023">2023</option>
        <option value="2024">2024</option>
        <option value="2025">2025</option>
        <option value="2026">2026</option>
        <option value="2027">2027</option>
        <option value="2028">2028</option>
        <option value="2029">2029</option>
        <option value="2030">2030</option>
        <option value="2031">2031</option>
        <option value="2032">2032</option>
    </select>

    <select id="month-select">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
    </select>

    <select id="day-select">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
    </select>

    <select id="hour-select">
        <option value="0">00</option>
        <option value="1">01</option>
        <option value="2">02</option>
        <option value="3">03</option>
        <option value="4">04</option>
        <option value="5">05</option>
        <option value="6">06</option>
        <option value="7">07</option>
        <option value="8">08</option>
        <option value="9">09</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
    </select>

    <select id="minute-select">
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
        <option value="32">32</option>
        <option value="33">33</option>
        <option value="34">34</option>
        <option value="35">35</option>
        <option value="36">36</option>
        <option value="37">37</option>
        <option value="38">38</option>
        <option value="39">39</option>
        <option value="40">40</option>
        <option value="41">41</option>
        <option value="42">42</option>
        <option value="43">43</option>
        <option value="44">44</option>
        <option value="45">45</option>
        <option value="46">46</option>
        <option value="47">47</option>
        <option value="48">48</option>
        <option value="49">49</option>
        <option value="50">50</option>
        <option value="51">51</option>
        <option value="52">52</option>
        <option value="53">53</option>
        <option value="54">54</option>
        <option value="55">55</option>
        <option value="56">56</option>
        <option value="57">57</option>
        <option value="58">58</option>
        <option value="59">59</option>
    </select>

    <select id="second-select">
        <option value="0">0</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
        <option value="32">32</option>
        <option value="33">33</option>
        <option value="34">34</option>
        <option value="35">35</option>
        <option value="36">36</option>
        <option value="37">37</option>
        <option value="38">38</option>
        <option value="39">39</option>
        <option value="40">40</option>
        <option value="41">41</option>
        <option value="42">42</option>
        <option value="43">43</option>
        <option value="44">44</option>
        <option value="45">45</option>
        <option value="46">46</option>
        <option value="47">47</option>
        <option value="48">48</option>
        <option value="49">49</option>
        <option value="50">50</option>
        <option value="51">51</option>
        <option value="52">52</option>
        <option value="53">53</option>
        <option value="54">54</option>
        <option value="55">55</option>
        <option value="56">56</option>
        <option value="57">57</option>
        <option value="58">58</option>
        <option value="59">59</option>
    </select>

    <p id="result-wrapper">现在距离 2001年1月1日星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒</p>

    <script>
        var yearSelect = document.querySelector("#year-select");
        var monthSelect = document.querySelector("#month-select");
        var daySelect = document.querySelector("#day-select");
        var hourSelect = document.querySelector("#hour-select");
        var minuteSelect = document.querySelector("#minute-select");
        var secondSelect = document.querySelector("#second-select");
        var resultWrapper = document.querySelector("#result-wrapper");

        window.setInterval(updateResultWrapper, 1000);
        window.setInterval(adjustDate, 100);

        function updateResultWrapper() {
            var nowTime = getNowTime();
            var selectedTime = getSelectedTime();
            var difference;
            var diffDay;
            var diffHour;
            var diffMinute;
            var diffSecond;
            if (nowTime.getTime() - selectedTime.getTime() > 0) {
                difference = (nowTime.getTime() - selectedTime.getTime()) / 1000;
                diffDay = Math.floor(difference / 86400);
                diffHour = Math.floor(difference / 3600) - 24 * diffDay;
                diffMinute = Math.floor(difference / 60) - 24 * 60 * diffDay - 60 * diffHour;
                diffSecond = Math.floor(difference) - 24 * 60 * 60 * diffDay - 60 * 60 * diffHour - 60 * diffMinute;
                resultWrapper.innerHTML = "现在距离" + getYear(selectedTime) + "年" + getMonth(selectedTime) + "月" + getDate(selectedTime) +
                    "日 " + getDay(selectedTime) + " " + getHours(selectedTime) + ":" + getMinutes(selectedTime) + ":" + getSeconds(selectedTime) +
                    " 已过去 " + diffDay + " 天 " + diffHour + " 小时 " + diffMinute + " 分 " + diffSecond + " 秒 ";
            } else {
                difference = (selectedTime.getTime() - nowTime.getTime()) / 1000;
                diffDay = Math.floor(difference / 86400);
                diffHour = Math.floor(difference / 3600) - 24 * diffDay;
                diffMinute = Math.floor(difference / 60) - 24 * 60 * diffDay - 60 * diffHour;
                diffSecond = Math.floor(difference) - 24 * 60 * 60 * diffDay - 60 * 60 * diffHour - 60 * diffMinute;
                resultWrapper.innerHTML = "现在距离" + getYear(selectedTime) + "年" + getMonth(selectedTime) + "月" + getDate(selectedTime) +
                    "日 " + getDay(selectedTime) + " " + getHours(selectedTime) + ":" + getMinutes(selectedTime) + ":" + getSeconds(selectedTime) +
                    " 还有 " + diffDay + " 天 " + diffHour + " 小时 " + diffMinute + " 分 " + diffSecond + " 秒 ";
            }
        }

        function adjustDate() {
            var year = Number(getValue(yearSelect));
            var month = Number(getValue(monthSelect));      // switch是严格等于，因此将其从string转化为number
            var day29 = daySelect.children[28];
            var day30 = daySelect.children[29];
            var day31 = daySelect.children[30];
            switch (month) {
                case 1:
                case 3:
                case 5:
                case 7:
                case 8:
                case 10:
                case 12:
                    showOption(day29);
                    showOption(day30);
                    showOption(day31);
                    break;
                case 4:
                case 6:
                case 9:
                case 11:
                    showOption(day29);
                    showOption(day30);
                    hideOption(day31);
                    break;
                case 2:
                    if (isLeapYear(year)) {
                        showOption(day29);
                    } else {
                        hideOption(day29);
                    }
                    hideOption(day30);
                    hideOption(day31);
                    break;
            }
        }

        function hideOption(option) {
            option.style.display = "none";
        }

        function showOption(option) {
            option.style.display = "inline";
        }

        function isLeapYear(n) {
            return ((n % 4 == 0 && n % 100 != 0) || n % 400 == 0);
        }

        function getYear(time) {
            var year = time.getFullYear();
            return year;
        }

        function getMonth(time) {
            var month = time.getMonth();
            month += 1;
            month = addZero(month);
            return month;
        }

        function getDate(time) {
            var date = time.getDate();
            date = addZero(date);
            return date;
        }

        function getDay(time) {
            var day;
            switch (time.getDay()) {
                case 0:
                    day = "星期日";
                    break;
                case 1:
                    day = "星期一";
                    break;
                case 2:
                    day = "星期二";
                    break;
                case 3:
                    day = "星期三";
                case 4:
                    day = "星期四";
                    break;
                case 5:
                    day = "星期五";
                    break;
                case 6:
                    day = "星期六"
            }
            return day;
        }

        function getHours(time) {
            var hour = time.getHours();
            hour = addZero(hour);
            return hour;
        }

        function getMinutes(time) {
            var minute = time.getMinutes();
            minute = addZero(minute);
            return minute;
        }

        function getSeconds(time) {
            var second = time.getSeconds();
            second = addZero(second);
            return second;
        }

        function getValue(objectSelect) {
            var value;
            var index = objectSelect.selectedIndex;
            value = objectSelect.options[index].value;
            return value;
        }

        function getSelectedTime() {
            var year = getValue(yearSelect);
            var month = getValue(monthSelect) - 1;
            var day = getValue(daySelect);
            var hour = getValue(hourSelect);
            var minute = getValue(minuteSelect);
            var second = getValue(secondSelect);
            var selectedTime = new Date(year, month, day, hour, minute, second);
            return selectedTime;
        }

        function getNowTime() {
            var nowTime = new Date();
            return nowTime;
        }

        function addZero(num) {
            if (num < 10) {
                num = "0" + num;
            }
            return num;
        }
    </script>
</body>

</html>